import 'dart:typed_data';

import 'package:flutter_test/flutter_test.dart';
import 'package:flutter_savgol/flutter_savgol.dart';

const weights = [
  0.0,
  0.0,
  0.1,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.0,
  0.1,
  0.2,
  0.2,
  0.2,
  0.4,
  0.6,
  0.7,
  0.8,
  1.1,
  1.2,
  1.6,
  1.7,
  1.5,
  1.6,
  1.6,
  1.9,
  1.9,
  1.9,
  2.1,
  2.2,
  2.6,
  2.5,
  2.5,
  2.7,
  2.7,
  2.7,
  2.8,
  2.8,
  2.9,
  2.9,
  2.9,
  2.9,
  3.0,
  3.2,
  3.3,
  3.3,
  3.3,
  3.4,
  3.4,
  3.4,
  3.4,
  3.6,
  3.7,
  3.7,
  3.7,
  3.8,
  3.8,
  3.8,
  4.0,
  4.1,
  4.2,
  4.2,
  4.2,
  4.3,
  4.3,
  4.3,
  4.3,
  4.6,
  4.7,
  5.0,
  5.2,
  5.2,
  5.2,
  5.3,
  5.6,
  5.5,
  5.8,
  5.9,
  6.2,
  6.2,
  6.2,
  6.3,
  6.5,
  6.9,
  7.1,
  7.0,
  7.4,
  7.5,
  7.5,
  7.7,
  8.0,
  8.0,
  8.1,
  8.7,
  8.8,
  9.0,
  9.1,
  9.2,
  9.5,
  9.8,
  10.1,
  10.1,
  10.5,
  10.8,
  10.9,
  11.3,
  11.5,
  11.7,
  11.8,
  11.9,
  12.2,
  12.7,
  12.8,
  13.0,
  13.2,
  13.3,
  13.6,
  13.8,
  14.2,
  14.4,
  14.7,
  15.0,
  15.5,
  15.8,
  16.1,
  16.4,
  16.6,
  17.1,
  17.4,
  17.5,
  18.0,
  18.4,
  18.7,
  19.1,
  19.5,
  19.9,
  20.3,
  20.7,
  21.2,
  21.6,
  21.9,
  22.3,
  22.7,
  23.1,
  23.5,
  23.9,
  24.3,
  24.8,
  25.1,
  25.7,
  26.0,
  26.1,
  26.6,
  27.0,
  27.5,
  27.7,
  28.2,
  28.5,
  28.7,
  29.1,
  29.5,
  29.8,
  30.2,
  30.7,
  30.8,
  31.3,
  31.6,
  31.9,
  32.2,
  32.5,
  33.1,
  33.4,
  33.8,
  34.2,
  34.4,
  35.1,
  35.3,
  35.9,
  36.2,
  36.7,
  37.0,
  37.2,
  37.5,
  37.9,
  38.1,
  38.5,
  38.7,
];

void main() {
  test('success', () async {
    await savgolFilter(
        x: Float64List.fromList(weights),
        windowLength: 11,
        polyOrder: 2,
        derivative: 1);
  });

  test('failure', () async {
    try {
      await savgolFilter(
          x: Float64List.fromList(weights),
          windowLength: 100,
          polyOrder: 2,
          derivative: 1);
    } catch (e) {
      expect(e, "window_length must be odd");
    }
  });
}
